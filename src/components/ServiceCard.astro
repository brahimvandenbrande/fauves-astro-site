---
// components/ServiceCard.astro
interface Props {
  href: string;
  shortTitle: string;
  title: string;
  excerpt: string;
  tags?: string[];
}

const { href, shortTitle, title, excerpt, tags = [] } = Astro.props;
---

<!-- Container for the card with container query context -->
<div class="service-card-container group relative h-full min-h-[500px]">
  <div
    class="service-card-content relative flex h-full flex-1 flex-col rounded-[20px] border border-solid border-black bg-white px-6 pt-6 pb-2 transition-all duration-300 hover:border-[#522be2]"
  >
    {/* Tags container */}
    <div class="relative z-10">
      <div class="relative">
        {
          tags.length > 0 && (
            <div class="flex flex-wrap gap-1.5">
              {tags.map((tag: string) => (
                <a
                  href={`/services#${tag.toLowerCase().replace(/\s+/g, "-")}`}
                  class="group/tag inline-flex items-center rounded-[30.7px] border border-solid border-[#522be2] px-3 py-1.5 no-underline transition-colors duration-300 hover:bg-[#522be2]"
                >
                  <span class="font-sans text-[11px] leading-none font-medium tracking-wider text-[#522be2] uppercase group-hover/tag:text-white">
                    {tag}
                  </span>
                </a>
              ))}
            </div>
          )
        }
      </div>
    </div>

    {/* Content area with fixed height */}
    <div class="flex-1 flex flex-col">
      {/* Spacer to push title to fixed position */}
      <div class="flex-1"></div>
      
      {/* Title and excerpt section with fixed height */}
      <a
        href={href}
        class="group/link relative z-0 block h-[180px] flex flex-col justify-center pt-4 pb-4 no-underline"
        aria-label={`View ${title}`}
      >
        <div class="flex-1 flex flex-col justify-center">
          {/* Title with consistent spacing */}
          <div class="min-h-[96px] flex items-center">
            <h2 class="font-sans text-[2rem] leading-[1.1] font-semibold tracking-wider text-black lowercase transition-colors duration-300 group-hover:text-[#522be2]">
              {shortTitle}
            </h2>
          </div>

          {/* Excerpt with consistent spacing */}
          <div class="flex-1 flex items-start">
            <p class="font-sans text-[1.1rem] leading-[1.5] font-light text-black transition-colors duration-300 group-hover:text-[#522be2]">
              {excerpt}
            </p>
          </div>
        </div>
      </a>
    </div>
  </div>
  
  <style>
    /* Container query setup */
    .service-card-container {
      container-type: inline-size;
      container-name: service-card;
      width: 100%;
      height: 100%;
    }

    /* Default styles */
    .service-card-content {
      padding: 1.5rem;
    }

    /* Responsive adjustments using container queries */
    @container service-card (max-width: 400px) {
      .service-card-content {
        padding: 1.25rem;
      }
      
      .service-card-content h2 {
        font-size: 1.5rem;
      }
      
      .service-card-content p {
        font-size: 0.95rem;
      }
      
      .service-card-content .group\/tag {
        padding: 0.375rem 0.75rem;
      }
    }

    @container service-card (min-width: 401px) and (max-width: 639px) {
      .service-card-content h2 {
        font-size: 1.75rem;
      }
    }

    @container service-card (min-width: 640px) and (max-width: 1023px) {
      .service-card-content {
        padding: 1.75rem;
      }
      
      .service-card-content h2 {
        font-size: 2rem;
      }
    }

    @container service-card (min-width: 1024px) {
      .service-card-content {
        padding: 2rem;
      }
      
      .service-card-content h2 {
        font-size: 2.25rem;
      }
    }

    /* Hover state */
    .service-card-content:hover {
      border-color: #522be2;
    }
  </style>
</div>
